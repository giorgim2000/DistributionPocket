
<div id="headerDiv">
    <div class="titleDiv">
        <p id="title">ვიზიტები</p>
    </div>
    
    
    <dx-text-box 
    [showClearButton]="true"
    placeholder="ფილტრი"
    valueChangeEvent="keyup"
    (onValueChanged)="filterValueChanged($event)"
    >

    </dx-text-box>

    <!-- <dx-date-box 
    [(ngModel)]="visitDate"
    (onValueChanged)="dateChange($event)"
    [acceptCustomValue]="false"
    [openOnFieldClick]="true"
    [stylingMode]="'outlined'"
    [label]="'თარიღი'"
    [displayFormat]="'dd-MM-yyyy'"
    [dateSerializationFormat]="'yyyy-MM-dd'"
    >
    </dx-date-box> -->
</div>
<div id="mainDiv" cdkDropList (cdkDropListDropped)="onDrop($event)">
    <!-- <div *ngIf="dataSource.length === 0" class="notFoundDiv">
        მიმდინარეობს მონაცემების ჩატვირთვა...
    </div> -->
    <div *ngIf="FilteredData.length > 0">
        <div class="tabMain" (click)="visitClick(visit)" *ngFor="let visit of FilteredData" cdkDrag [cdkDragStartDelay]="750" cdkDragBoundary="#mainDiv">
            <div class="tabDiv">
                <div class="clientAdressDiv">
                    <p id="nameP">{{visit.Accnu}}</p>
                    <p id="adressP">{{visit.Address}}</p>
                </div>
                <div class="otherInfoDiv">
                    <p>შეკვეთები: 
                        <a class="otherInfoP">{{visit.Ordsuccess}}/{{visit.Ordn}}</a>
                    </p>
                    <p>დაბრუნებები: 
                        <a class="otherInfoP">{{visit.Retsuccess}}/{{visit.Retn}}</a>
                    </p>
                    <p>თანხა: 
                        <a class="otherInfoP">{{visit.Payedcash}}/{{visit.Collectpay}}</a>
                    </p>
                </div>
            </div>
            <div class="iconDiv">
                <ng-container *ngIf="visit.VisitStatus === 1; then pending else
                    (visit.VisitStatus === 2 ? completed : 
                     (visit.VisitStatus === 3 ? error : canceled))">
                </ng-container>
                <ng-template #completed>
                    <img [src]="completedUrl" alt="Completed">
                </ng-template>

                <ng-template #pending>
                    <img [src]="pendingUrl" alt="Pending">
                </ng-template>

                <ng-template #error>
                    <img [src]="errorUrl" alt="Error">
                </ng-template>

                <ng-template #canceled>
                    <img [src]="canceledUrl" alt="canceled">
                </ng-template>
            </div>
        </div>
        
    </div>
    <div *ngIf="FilteredData.length === 0" class="notFoundDiv">
        ვიზიტები ვერ მოიძებნა...
    </div>
    <dx-load-panel
    #loadPanel
    shadingColor="rgba(0,0,0,0.4)"
    [visible]="loading"
    [showIndicator]="true"
    [showPane]="false"
    [shading]="true"
    [hideOnOutsideClick]="false"
    >
    </dx-load-panel>
</div>



  
